# Описание репозитория

Библиотека для локализации Minecraft-плагинов, через языковые файлы или конфигурации.

## Быстрый старт

### Создание словаря

В основном классе библиотеки описаны основные API создания словаря локализации.
Статический метод `PixplazeKeywordLib.fromLanguageDirectory(...)` создаёт словарь
из директории с файлами локализации. К примеру:

```
var dict = PixplazeKeywordLib.fromLanguageDirectory(Locale.US, this.pluginDirPath + "/lang");
```

**Где**: \
`Locale.US` - локализация по умалчанию, которая будет применена, в случае, если запрашиваемая
локализация не будет найдена; \
`this.pluginDirPath + "/lang"` - папка плагина + папка в которой хранятся локализации.

Словарь локализаций (наследник интерфейса Dictionary) содержит в себе все локализации плагина.
Для того, чтобы начать пользоваться библиотекой необходимо предварительно описать файлы
локализации и поместить их в папку, указанную при вызове метода создния словаря. В нашем случае
`this.pluginDirPath + "/lang"`.

> Вызов метода и инициализацию словаря лучше проризводить в главном классе вашего плагина.

Каталог локализаций может выглядеть примерно так, и именно к нему указывается путь в вызове метода:

```
lang/           // Директория локализаций
│
├─ en_US.yml 	// Английский (США)
├─ en_GB.yml	// Английский (Соединённое королевство)
├─ ru_RU.yml 	// Русский (Россия)
├─ tt_RU.yml	// Татарский (Россия)
├─ ru_UK.yml 	// Украинский (Украина)
├─ it-IT.yml 	// Итальянский (Италия)
└─ be_BY.yml	// Белорусский (Беларусь)
```

### Использование словаря

В случае статической инициализации словаря, использовать его можно в любом месте плагина.

```
var message = YourPlugin.dict.get(Locale.forLanguageTag("ru-RU"), "<keyword>");
```

**Где**: \
`<keyword>` - ключевое слово, по которому мы достаём локализованную строку.


### Использование автоматического перевода

Для того, чтобы словарь сам определял сообщение какой локализации возвращать
необходимо указать локализацию которая включена у игрока на данный момент:

```
var message = YourPlugin.dict.get(player.locale(), "<keyword>");
player.sendMessage(message);
```

> В случае, если локализация для его языка будет заранее не определена, вернётся
> строка в локализации по умолчанию, которую мы указывали при создании словаря.


## Локализация

Для локализации Minecraft-плагина (подключаемого модуля), существует два основных варианта
использования библиотеки `PixplazeKeywordLib`:

-	Перевод через директорию с файлами локализации;
-	Перевод через ручное создание словаря.


### Синтаксис файла локализации

В файле-локализации должна располагаться секция `translation`, синтаксис описания которой
зависит от формата записи. Структура секции при этом одинакова для всех форматов.

**На примере формата `Yaml`**:

```
translation:
  locale: "en-US",
  keywords:
    <keyword1>: "string1",
    <keyword2>: "string2",
    ...
```

**На примере формата `Json`**:
```
{
  "translation": {
    "locale": "en-US",
    "keywords": {
      "<keyword1>": "string1",
      "<keyword2>": "string2",
      ...
    }
  }
}
```
> **Примечание**:
> Поле `locale` - языковой тег по стандарту RFC 5646.


### Перевод через директорию с файлами локализации

Локализация плагина может находиться в файле любого расширения, в кодировке, поддерживающей
символы необходимого языка. **На один файл может приходиться только одна локализация!**
(один файл - один язык). В случае, если нет необходмости в переводе плагина на разные языки,
локализация может находиться в файле конфигурации `config.yml`.

